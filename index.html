<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>SatPass</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script type="text/javascript" src="satellite.min.js"></script>
    <script type="text/javascript" src="sat-predict.js"></script>
    <script type="text/javascript" src="elm.js"></script>
</head>
<body></body>
<script>
  var geo_options = {
    enableHighAccuracy: false,
    maximumAge: 48 * 60 * 60 * 1000,  // 48 hours
  };

  var app = Elm.Main.fullscreen();

  navigator.geolocation.getCurrentPosition(function (pos) {
    var timestamp = (new Date()).getTime();
    app.ports.recvTimeAndCoords.send([timestamp, pos.coords]);
  }, undefined, geo_options);

  app.ports.sendPassReq.subscribe(function (req) {
      app.ports.recvPasses.send(SatPredict.getPasses(req));
  });

  app.ports.sendLookAngleReq.subscribe(function (req) {
      app.ports.recvLookAngles.send(SatPredict.getLookAngles(req));
  });
</script>
</html>
